<div class="reveal" data-reveal id="budget-confirm">
  <% if current_order.present? %>
    <div class="reveal__header">
      <h3 class="reveal__title"><%= t(".title") %></h3>
      <button class="close-button" data-close aria-label="<%= t(".cancel") %>" type="button">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <p><%= t(".description") %></p>
    <div class="card card--secondary">
      <ul class="card__content">
        <% current_order.projects.each do |project| %>
          <li class="budget-summary__selected-item">
            <%= decidim_sanitize(translated_attribute(project.title)) %>
            <strong class="budget-summary__selected-number">
              <%= budget_to_currency project.budget_amount %>
            </strong>
          </li>
        <% end %>
      </ul>
    </div>
    <p class="text-center"><%= t(".are_you_sure") %></p>

    <% if !voting_booth_forced? && voting_terms.present? %>
        <h4 class="text-center"><%= t(".is_this_correct") %></h4>
      <div class="margin-bottom-2 card card--secondary">
      <div class="card__content">
        <%== voting_terms %>
      </div>
      </div>
    <% end %>

    <div class="row">
      <div class="columns medium-8 medium-offset-2">
        <%= button_to t(".confirm"), checkout_budget_order_path(budget), class: "button expanded", data: { disable: true } %>
      </div>
    </div>
    <div class="text-center">
      <button class="link" data-close><%= t(".cancel") %></button>
    </div>
  <% end %>
</div>

<%= decidim_modal id: "budget-confirm", class:"verification-modal" do %>
  <div data-dialog-container>
    <%= icon "check-double-line" %>
    <h3 class="h3" id="dialog-title-budget-confirm" data-dialog-title>
      <%= t("title", scope: "decidim.budgets.projects.budget_confirm") %>
    </h3>
    <div class="my-8" id="budget-confirm-current-order">
      <% if current_order.present? %>
        <h4 class="h4 mb-4"><%= decidim_sanitize(translated_attribute(budget.title)) %></h4>
        <p class="mb-4"><%= t(".description") %></p>
        <div class="card card--secondary">
          <% current_order.projects.each do |project| %>
            <div class="card__list card__list__project-voted">
              <div class="card__list__content">
                <div class="card__list-text">
                  <%= link_to decidim_sanitize(translated_attribute(project.title)), resource_locator([budget, project]).path, class: "card__list-title" %>
                </div>
              </div>
              <div class="budget__card__list-project">
                <span class="budget-list__data__number budget-list__number-show-for-medium">
                  <%= budget_to_currency project.budget_amount %>
                </span>
              </div>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>

    <% if !voting_booth_forced? && voting_terms.present? %>
      <h4 class="text-center"><%= t(".is_this_correct") %></h4>

      <div class="margin-bottom-2 card card--secondary">
        <div class="card__content">
          <%== voting_terms %>
        </div>
      </div>
    <% end %>

  </div>
  <div data-dialog-actions>

    <button class="button button__sm md:button__lg button__transparent-secondary" data-dialog-close="budget-confirm">
      <%= t("cancel", scope: "decidim.budgets.projects.budget_confirm") %>
    </button>

    <%= button_to checkout_budget_order_path(budget), class: "button button__sm md:button__lg button__secondary", data: { disable: true } do %>
      <span>
        <%= t("confirm", scope: "decidim.budgets.projects.budget_confirm") %>
      </span>
      <%= icon "arrow-right-line", class: "fill-current" %>
    <% end %>
  </div>
<% end %>
