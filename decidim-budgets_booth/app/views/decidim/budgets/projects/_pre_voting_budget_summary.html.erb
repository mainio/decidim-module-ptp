<div class="card budget-summary pre-voting-budget-summary" data-progress-reference data-safe-url="<%= budget_url(budget) %>">
  <div class="card__content mb-4 px-4 space-y-4 lg:px-0">
    <% if current_order_checked_out? %>
      <h1 class="h2 md:h1">
        <%= translated_attribute(budget.title) %>
      </h1>
      <p class="my-4">
        <%= raw t(".pre_vote.casted_description", cancel_link: link_to(t(".cancel_order"), budget_order_path(return_to: "budget"), method: :delete, class: "cancel-order", data: { confirm: t(".are_you_sure") })) %>
      </p>
      <% if session.delete(:show_status) %>
        <div id="trigger-status" class="hidden"></div>
      <% end %>
      <div class="align-right">
        <button data-dialog-open="status-summary", class="button button__lg button__secondary"><%= t(".pre_vote.result_voted") %></button>
      </div>
    <% else %>
      <h1 class="h1">
        <%= translated_attribute(budget.title) %>
      </h1>
      <p class="my-4 h5"><%= t(".total_budget", amount: budget_to_currency(budget.total_budget)) %></p>
      <p class="inline-block text-center text-xl lg:w-[480px]">
        <%= description_text %>
        <div class="flex flex-col mt-4 space-y-4 lg:flex-row lg:justify-center lg:items-center lg:gap-4 lg:space-y-0">
          <button id="show-projects" class="button button__lg button__transparent-secondary"><%= t(".browse") %></button>
          <%= button_to budget_voting_index_path, class: "button button__lg button__secondary start-vote-button", method: :get, disabled: !voting_open? do %>
            <%= vote_text %>
            <%= icon "arrow-right-line", class:"pt-1 h-6 w-6" %>
          <% end %>
        </div>
      </p>
    <% end %>
  </div>
</div>

<%= render partial: "decidim/budgets/voting/voted_summary_modal" if current_order_checked_out? %>
<%= render partial: "decidim/budgets/orders/status_summary_modal", locals: { post_vote: true } if current_order_checked_out? %>

<%= append_javascript_pack_tag "decidim_budgets_booth_show_projects" %>
